{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,S,uCAOA,MAAMC,EAA4BC,SAASC,cAAc,qBAEzDC,QAAQC,IAAIJ,GACZ,MAAMK,EAAkBJ,SAASC,cAAc,sBAG/C,IAAII,EAAiB,GACrB,MAAMC,EAAkB,KACtB,MAAMC,EAAyBC,aAAaC,QAAQC,EAAAC,KAAKC,qBACzD,OAAOC,KAAKC,MAAMP,EAAuB,EAuC3CQ,eAAeC,IACbjB,EAA0BkB,UAAY,GAEtC,MAAMC,EAAgBZ,IAAkBa,KAAIC,GACnCvB,EAAAwB,QAAUC,mBAAmBF,KAKhCG,SAFiBC,QAAQC,IAAIP,IAEXC,KAAI,EAACO,YAAEA,KAAkBA,IAAaC,KAAK,GAEnE5B,GAA2B6B,mBACzB,aAlCJ,SAAkCC,GAChC,MAAMC,EAAItB,aAAaC,QAAQC,EAAAC,KAAKoB,kBAkBpC,OAhBaF,EAAIV,KACf,EAACa,cAAEA,EAAaC,WAAEA,EAAUC,QAAEA,EAAOC,eAAEA,EAAcC,aAAEA,KAC9C,wCAAwCA,gDACVJ,yDAEvB,OAAZE,EAAmBF,EAAgBE,sGAGYF,iFACEI,MACjDN,GAAGO,SAASD,GAAgB,UAAY,kDAMhCE,KAAK,G,CAgBjBC,CAAyBhB,G,CAlD7BrB,QAAQC,IAAIG,KACRA,MACFD,EAAiB,IAAIC,KAErBU,EAA0BV,MAMvBA,KAAkD,IAA7BA,IAAkBkC,QAC1CpC,EAAgBwB,mBAAmB,aAJ5B,yFAyET7B,GAA2B0C,iBAAiB,SA1BzBC,IACjB,GAA8B,WAA1BA,EAAMC,OAAOC,WAGc,gBAA3BF,EAAMC,OAAOE,YACf,EAAAC,EAAAC,qBAAoBL,EAAMC,OAAOK,IAEJ,kBAA3BN,EAAMC,OAAOE,WAA+B,CAC9C,MAAMf,EAAItB,aAAaC,QAAQC,EAAAC,KAAKC,qBACpCV,QAAQC,IAAI2B,GACRA,EAAEO,SAASY,OAAOP,EAAMC,OAAOK,MACjC3C,EAAe6C,OAAO7C,EAAe8C,QAAQF,OAAOP,EAAMC,OAAOK,KAAM,GACvExC,aAAa4C,QACX1C,EAAAC,KAAKC,oBACLC,KAAKwC,UAAUhD,IAEjBH,QAAQC,IAAIuC,EAAMC,OAAOK,IAEzBhC,OAEA,EAAAsC,EAAAC,iBAAgBN,OAAOP,EAAMC,OAAOK,KACpChC,I","sources":["src/js/localStorege/LocalStoregeIngridients.js"],"sourcesContent":["import fetchData from '../fetch';\nimport { openIngredientModal } from '../modal-ingredients';\nimport { setIdIngridient } from './addRemoveIngredients';\n// import { onGalleryClick } from './modal-cocktails';\nimport { keys } from '../localStorege/localStoregeKeys';\n// const modal = document.querySelector('.coctail-info-modal ');\n\nconst favoritIngredientsGallery = document.querySelector('.ingredients-list');\n//\nconsole.log(favoritIngredientsGallery);\nconst soryIngredients = document.querySelector('.ingredients-sorry');\n//todo add classlist\n\nlet ingredientsObj = [];\nconst getLocalStorege = () => {\n  const savedIngredientsGalery = localStorage.getItem(keys.localIngredientsKey);\n  return JSON.parse(savedIngredientsGalery);\n};\nconsole.log(getLocalStorege());\nif (getLocalStorege()) {\n  ingredientsObj = [...getLocalStorege()];\n\n  renderFavoriteIngredients(getLocalStorege());\n}\nfunction emptyIngredients() {\n  return `<p class=\"sorry__title-coctails \">You haven't added any favorite ingridients yet</p>`;\n}\n\nif (!getLocalStorege() || getLocalStorege().length === 0) {\n  soryIngredients.insertAdjacentHTML('afterbegin', emptyIngredients());\n}\n\n//\nfunction createGalleryIngredients(arr) {\n  const a = localStorage.getItem(keys.localCoctailsKey);\n\n  let markup = arr.map(\n    ({ strIngredient, strAlcohol, strType, strDescription, idIngredient }) => {\n      return `<li class=\"ingredient__card\" data-id=${idIngredient}>\n      <h3 class=\"ingredient-card__title\">${strIngredient}</h3>\n      <p class=\"ingredient-card__description\">${\n        strType === null ? strIngredient : strType\n      }</p>\n      <div class=\"button__container\">\n        <button type=\"button\" class=\"button-more\" id=${strIngredient}>Learn more</button>\n        <button type=\"button\" class=\"button-remove\" id=${idIngredient} >${\n        a?.includes(idIngredient) ? 'Add to ' : 'Remove '\n      }</button>\n      </div>\n      </li>`;\n    }\n  );\n  return markup.join('');\n  //\n}\nasync function renderFavoriteIngredients() {\n  favoritIngredientsGallery.innerHTML = '';\n\n  const getFotoByLSID = getLocalStorege().map(num => {\n    return fetchData.fetchIngredientyId(num);\n  });\n\n  const response = await Promise.all(getFotoByLSID);\n\n  const result = response.map(({ ingredients }) => ingredients).flat(1);\n\n  favoritIngredientsGallery?.insertAdjacentHTML(\n    'afterbegin',\n    createGalleryIngredients(result)\n  );\n}\n\nconst onBtnClick = event => {\n  if (event.target.nodeName !== 'BUTTON') {\n    return;\n  }\n  if (event.target.className === 'button-more') {\n    openIngredientModal(event.target.id);\n  }\n  if (event.target.className === 'button-remove') {\n    const a = localStorage.getItem(keys.localIngredientsKey);\n    console.log(a);\n    if (a.includes(Number(event.target.id))) {\n      ingredientsObj.splice(ingredientsObj.indexOf(Number(event.target.id)), 1);\n      localStorage.setItem(\n        keys.localIngredientsKey,\n        JSON.stringify(ingredientsObj)\n      );\n      console.log(event.target.id);\n\n      renderFavoriteIngredients();\n    } else {\n      setIdIngridient(Number(event.target.id));\n      renderFavoriteIngredients();\n    }\n  }\n};\n\nfavoritIngredientsGallery?.addEventListener('click', onBtnClick);\n"],"names":["$cyIMT","parcelRequire","$7d9377c24f562489$var$favoritIngredientsGallery","document","querySelector","console","log","$7d9377c24f562489$var$soryIngredients","$7d9377c24f562489$var$ingredientsObj","$7d9377c24f562489$var$getLocalStorege","savedIngredientsGalery","localStorage","getItem","$bvzT9","keys","localIngredientsKey","JSON","parse","async","$7d9377c24f562489$var$renderFavoriteIngredients","innerHTML","getFotoByLSID","map","num","default","fetchIngredientyId","result","Promise","all","ingredients","flat","insertAdjacentHTML","arr","a","localCoctailsKey","strIngredient","strAlcohol","strType","strDescription","idIngredient","includes","join","$7d9377c24f562489$var$createGalleryIngredients","length","addEventListener","event","target","nodeName","className","$aJrzc","openIngredientModal","id","Number","splice","indexOf","setItem","stringify","$clQLf","setIdIngridient"],"version":3,"file":"favorite-ingredients.62a55334.js.map"}