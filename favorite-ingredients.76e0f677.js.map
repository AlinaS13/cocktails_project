{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,S,8EAOMC,EAA4BC,SAASC,cAAc,qBAEzDC,QAAQC,IAAIJ,GACZ,IAAMK,EAAkBJ,SAASC,cAAc,sBAG3CI,EAAiB,GACfC,EAAkB,WACtB,IAAMC,EAAyBC,aAAaC,QAAQC,EAAAC,KAAKC,qBACzD,OAAOC,KAAKC,MAAMP,E,EAiBpB,SAASQ,EAAyBC,GAChC,IAAMC,EAAIT,aAAaC,QAAQC,EAAAC,KAAKO,kBAkBpC,OAhBaF,EAAIG,KACf,SAAAC,G,IAAGC,EAAaD,EAAbC,cAA2BC,GAAFF,EAAVG,WAAmBH,EAAPE,SAAyBE,GAAFJ,EAAdK,eAA4BL,EAAZI,cACrD,MAAO,wCAC8BE,OADUF,EAAa,gDAG1DE,OAFmCL,EAAc,yDAKFK,OAHnC,OAAZJ,EAAmBD,EAAgBC,EACpC,sGAGkDI,OADFL,EAAc,iFAE7DK,OADiDF,EAAa,MAE/DE,QADCT,aAAA,EAAAA,EAAGU,SAASH,IAAgB,UAAY,UACzC,uC,IAKSI,KAAK,G,UAGNC,I,OAAAC,EAAyBC,MAAAC,KAAAC,U,UAAzBH,I,OAAAA,EAAfI,EAAArC,EAAA,CAAAqC,EAAAC,GAAAC,MAAA,SAAAC,I,IAGQC,EAIAC,EAEAC,E,yEARNzC,EAA0B0C,UAAY,GAEhCH,EAAgBhC,IAAkBa,KAAI,SAAAuB,GAC1C,OAAOC,EAAAC,QAAUC,mBAAmBH,E,aAGfI,QAAQC,IAAIT,G,OAA7BC,EAAQS,EAAAC,KAERT,EAASD,EAASpB,KAAI,SAAAC,G,OAAcA,EAAX8B,W,IAA+BC,KAAK,GAEnEpD,WAA2BqD,mBACzB,aACArC,EAAyByB,I,4CAbWT,MAAAC,KAAAC,U,CArCxC/B,QAAQC,IAAIG,KACRA,MACFD,EAAkB6B,EAAAmB,EAAA,CAAG/C,KAErBuB,EAA0BvB,MAMvBA,KAAkD,IAA7BA,IAAkBgD,QAC1ClD,EAAgBgD,mBAAmB,aAJ3B,yFAyEVrD,WAA2BwD,iBAAiB,SA1BzB,SAAAC,GACjB,GAA8B,WAA1BA,EAAMC,OAAOC,WAGc,gBAA3BF,EAAMC,OAAOE,YACf,EAAAC,EAAAC,qBAAoBL,EAAMC,OAAOK,IAEJ,kBAA3BN,EAAMC,OAAOE,WAA+B,CAC9C,IAAM1C,EAAIT,aAAaC,QAAQC,EAAAC,KAAKC,qBACpCV,QAAQC,IAAIc,GACRA,EAAEU,SAASoC,OAAOP,EAAMC,OAAOK,MACjCzD,EAAe2D,OAAO3D,EAAe4D,QAAQF,OAAOP,EAAMC,OAAOK,KAAM,GACvEtD,aAAa0D,QACXxD,EAAAC,KAAKC,oBACLC,KAAKsD,UAAU9D,IAEjBH,QAAQC,IAAIqD,EAAMC,OAAOK,IAEzBjC,OAEA,EAAAuC,EAAAC,iBAAgBN,OAAOP,EAAMC,OAAOK,KACpCjC,I","sources":["src/js/localStorege/LocalStoregeIngridients.js"],"sourcesContent":["import fetchData from '../fetch';\nimport { openIngredientModal } from '../modal-ingredients';\nimport { setIdIngridient } from './addRemoveIngredients';\n// import { onGalleryClick } from './modal-cocktails';\nimport { keys } from '../localStorege/localStoregeKeys';\n// const modal = document.querySelector('.coctail-info-modal ');\n\nconst favoritIngredientsGallery = document.querySelector('.ingredients-list');\n//\nconsole.log(favoritIngredientsGallery);\nconst soryIngredients = document.querySelector('.ingredients-sorry');\n//todo add classlist\n\nlet ingredientsObj = [];\nconst getLocalStorege = () => {\n  const savedIngredientsGalery = localStorage.getItem(keys.localIngredientsKey);\n  return JSON.parse(savedIngredientsGalery);\n};\nconsole.log(getLocalStorege());\nif (getLocalStorege()) {\n  ingredientsObj = [...getLocalStorege()];\n\n  renderFavoriteIngredients(getLocalStorege());\n}\nfunction emptyIngredients() {\n  return `<p class=\"sorry__title-coctails \">You haven't added any favorite ingridients yet</p>`;\n}\n\nif (!getLocalStorege() || getLocalStorege().length === 0) {\n  soryIngredients.insertAdjacentHTML('afterbegin', emptyIngredients());\n}\n\n//\nfunction createGalleryIngredients(arr) {\n  const a = localStorage.getItem(keys.localCoctailsKey);\n\n  let markup = arr.map(\n    ({ strIngredient, strAlcohol, strType, strDescription, idIngredient }) => {\n      return `<li class=\"ingredient__card\" data-id=${idIngredient}>\n      <h3 class=\"ingredient-card__title\">${strIngredient}</h3>\n      <p class=\"ingredient-card__description\">${\n        strType === null ? strIngredient : strType\n      }</p>\n      <div class=\"button__container\">\n        <button type=\"button\" class=\"button-more\" id=${strIngredient}>Learn more</button>\n        <button type=\"button\" class=\"button-remove\" id=${idIngredient} >${\n        a?.includes(idIngredient) ? 'Add to ' : 'Remove '\n      }</button>\n      </div>\n      </li>`;\n    }\n  );\n  return markup.join('');\n  //\n}\nasync function renderFavoriteIngredients() {\n  favoritIngredientsGallery.innerHTML = '';\n\n  const getFotoByLSID = getLocalStorege().map(num => {\n    return fetchData.fetchIngredientyId(num);\n  });\n\n  const response = await Promise.all(getFotoByLSID);\n\n  const result = response.map(({ ingredients }) => ingredients).flat(1);\n\n  favoritIngredientsGallery?.insertAdjacentHTML(\n    'afterbegin',\n    createGalleryIngredients(result)\n  );\n}\n\nconst onBtnClick = event => {\n  if (event.target.nodeName !== 'BUTTON') {\n    return;\n  }\n  if (event.target.className === 'button-more') {\n    openIngredientModal(event.target.id);\n  }\n  if (event.target.className === 'button-remove') {\n    const a = localStorage.getItem(keys.localIngredientsKey);\n    console.log(a);\n    if (a.includes(Number(event.target.id))) {\n      ingredientsObj.splice(ingredientsObj.indexOf(Number(event.target.id)), 1);\n      localStorage.setItem(\n        keys.localIngredientsKey,\n        JSON.stringify(ingredientsObj)\n      );\n      console.log(event.target.id);\n\n      renderFavoriteIngredients();\n    } else {\n      setIdIngridient(Number(event.target.id));\n      renderFavoriteIngredients();\n    }\n  }\n};\n\nfavoritIngredientsGallery?.addEventListener('click', onBtnClick);\n"],"names":["$bpxeT","parcelRequire","$65d7c0436a52b202$var$favoritIngredientsGallery","document","querySelector","console","log","$65d7c0436a52b202$var$soryIngredients","$65d7c0436a52b202$var$ingredientsObj","$65d7c0436a52b202$var$getLocalStorege","savedIngredientsGalery","localStorage","getItem","$j5SYg","keys","localIngredientsKey","JSON","parse","$65d7c0436a52b202$var$createGalleryIngredients","arr","a","localCoctailsKey","map","param","strIngredient","strType","strAlcohol","idIngredient","strDescription","concat","includes","join","$65d7c0436a52b202$var$renderFavoriteIngredients","$65d7c0436a52b202$var$_renderFavoriteIngredients","apply","this","arguments","$parcel$interopDefault","$2TvXO","mark","_callee","getFotoByLSID","response","result","innerHTML","num","$5g02X","default","fetchIngredientyId","Promise","all","_ctx","sent","ingredients","flat","insertAdjacentHTML","$8nrFW","length","addEventListener","event","target","nodeName","className","$6alNL","openIngredientModal","id","Number","splice","indexOf","setItem","stringify","$jvcKX","setIdIngridient"],"version":3,"file":"favorite-ingredients.76e0f677.js.map"}